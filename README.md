# Dashboard Bot

Telegram-бот для автоматической публикации дашборда с данными о криптовалютах в канал.

## Настройки

Для работы бота необходимо создать файл `.env` в корне проекта со следующими переменными:

```env
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
CHANNEL_ID=your_channel_id
ADMIN_ID=your_admin_telegram_user_id
COINGLASS_API_KEY=your_coinglass_api_key
```

### Описание переменных окружения

- **TELEGRAM_BOT_TOKEN** (обязательно) - токен вашего Telegram бота, полученный от [@BotFather](https://t.me/BotFather)
- **CHANNEL_ID** (обязательно) - ID канала, в который будут публиковаться посты (например, `@nevernicce_trade` или числовой ID)
- **ADMIN_ID** (обязательно) - Telegram User ID администратора бота (числовое значение)
- **COINGLASS_API_KEY** (опционально) - API ключ для доступа к Coinglass API. Если не указан, автоматический сбор данных Coinglass будет недоступен

## Команды

### Для всех пользователей

- `/start` - приветственное сообщение с информацией о боте

### Только для администратора

- `/test` - тестовая отправка дашборда администратору в личные сообщения. Позволяет проверить корректность работы бота и формат данных перед публикацией в канал

- `/report` - немедленная публикация дашборда в канал. Собирает актуальные данные со всех источников и публикует отчет

- `/report_admin` - запрос на ручной ввод данных Coinglass для публикации в канал. После команды бот запросит данные в следующем формате:
  ```
  BTC: TV=X, TL=Y, LL=A, SL=B, OI=C; 
  ETH: TV=D, TL=E, LL=F, SL=G, OI=H; 
  XRP: TV=I, TL=J, LL=K, SL=L, OI=M
  ```
  Где:
  - **TV** - Общий объем фьючерсов
  - **TL** - Общий объем ликвидаций
  - **LL** - Объем ликвидаций лонг
  - **SL** - Объем ликвидаций шорт
  - **OI** - Открытый интерес
  
  Если данные недоступны, можно ответить `N/A`

- `/report_admin_test` - аналогично `/report_admin`, но отправляет тестовый отчет администратору в личные сообщения вместо публикации в канал

## Источники данных

Бот собирает данные из следующих источников:

- **Coinglass API** - данные о фьючерсах, объемах, открытом интересе и ликвидациях для BTC, ETH, XRP
- **CoinGecko API** - текущие цены, изменения за 24 часа и доминация BTC
- **Alternative.me** - индекс страха и жадности (Fear & Greed Index)

## Формат дашборда

Дашборд включает следующую информацию для каждой криптовалюты (BTC, ETH, XRP):

- Текущая цена и изменение за 24 часа
- Объем торгов за 24 часа
- Общие ликвидации за 24 часа
- Ликвидации лонг за 24 часа
- Ликвидации шорт за 24 часа
- Открытый интерес (OI)

Дополнительно:
- Доминация BTC
- Индекс страха и жадности

## Установка и запуск

1. Установите зависимости:
```bash
pip install python-telegram-bot aiohttp python-dotenv apscheduler pytz
```

2. Создайте файл `.env` с необходимыми переменными окружения

3. Запустите бота:
```bash
python dashboard.py
```

## Примечания

- Бот использует часовой пояс Europe/Moscow (MSK) для отображения времени
- Автоматическая публикация по расписанию в настоящее время отключена (закомментирована в коде)
- Если API ключ Coinglass не установлен, бот уведомит администратора и не будет собирать данные Coinglass автоматически
- При ошибках получения данных соответствующие поля отображаются как "N/A"
